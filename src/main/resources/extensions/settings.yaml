apiVersion: v1alpha1
kind: Setting
metadata:
  name: links-health-monitor-setting
spec:
  forms:
    - group: basic
      label: 基本设置
      formSchema:
        - $formkit: checkbox
          name: customizedCronEnable
          key: customizedCronEnable
          id: customizedCronEnable
          label: 启用自定义Cron表达式
          value: false
          help: 是否自定义监测友链的Cron表达式,默认每天0点监测一次。
        - $formkit: text
          if: $get(customizedCronEnable).value === true
          name: customizedCron
          key: customizedCron
          id: customizedCron
          label: 自定义6位cron表达式
          validation: required
          placeholder: 请输入自定义6位cron表达式，6位cron必须遵循「秒 分 时 日 月 星期」的格式
          help: 用于配置监测友链的定时任务的时间表达式，Cron表达式格式有误时使用默认配置。请注意自定义Cron的周期较短时，短期内多次执行任务会给系统带来负担。
        - $formkit: select
          name: notRequierdMonitorlinks
          key: notRequierdMonitorlinks
          id: notRequierdMonitorlinks
          label: 无需监测友链
          placeholder: 请选择不需要监测的友链
          multiple: true
          searchable: true
          action: /apis/api.plugin.halo.run/v1alpha1/plugins/PluginLinks/links
          requestOption:
            method: GET
            pageField: page
            sizeField: size
            totalField: total
            itemsField: items
            labelField: spec.displayName
            valueField: metadata.name
            fieldSelectorKey: spec.displayName
          validation: required
          help: 请选择不需要监测的友链